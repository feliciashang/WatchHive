import { minify } from '@swc/html';
export const defaultMinifyOptions = {
    collapseWhitespaces: 'all',
    minifyCss: true,
    minifyJs: false,
    minifyJson: true,
    quotes: true,
    removeComments: true,
    removeEmptyAttributes: true,
    removeRedundantAttributes: 'all',
    tagOmission: false,
};
export default function simpleHtmlPlugin({ minify: minifyOptions = false } = {}) {
    return {
        name: 'vite:simple-html:minify',
        transformIndexHtml: {
            order: 'post',
            handler: async (html) => {
                let result = html;
                if (minifyOptions) {
                    ({ code: result } = await minify(result, minifyOptions === true ? defaultMinifyOptions : minifyOptions));
                }
                return result;
            },
        },
    };
}
